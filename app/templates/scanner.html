{% extends "base.html" %}

{% block content %}
    <h2>Сканнер</h2>
    <div style="display: flex; gap: 20px;">
        <!-- Видеопоток -->
        <div style="flex: 2;">
            <img src="{{ url_for('video_feed') }}" alt="Video Feed" style="width: 100%; max-width: 640px;">
        </div>
        
        <!-- Логи -->
        <div style="flex: 1; background: #1e1e1e; color: #fff; padding: 10px; height: 480px; overflow-y: auto;">
            <pre id="logs" style="font-family: monospace; margin: 0;"></pre>
        </div>
    </div>

    <script>
        // Подключаемся к потоку логов
        const logElement = document.getElementById('logs');
        const eventSource = new EventSource('/log_stream');
        
        eventSource.onmessage = function(e) {
            logElement.innerHTML += e.data + '\n';
            logElement.scrollTop = logElement.scrollHeight;
        };
    </script>
{% endblock %}